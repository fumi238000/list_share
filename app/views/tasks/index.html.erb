<h1>タスク</h1>

<div id="tabs">

  <%# タスクを追加リンク%>
  <div class="text-right">
    <a>{{ href }}</a>
    <span class="mr-2"><a v-bind:href="href" >タスクを追加</span><i class="fas fa-plus-circle"></i></a>
  </div> 

  <%# カテゴリー + タスク start %>
  <div class="tab_box">

      <%# カテゴリーリスト start %>
      <ul class="tab_list">
        <% @categorys.each.with_index(1) do |c,i| %>
          <li v-on:click="change('<%= c.id %>')" v-bind:class="{'active': isActive === '<%= c.id %>'}"><%= i %>.<%= c.name %></li>
        <% end %>
      </ul>
      <%# カテゴリーリスト finish %>

      <%# タスクカードリスト start%>
      <ul class="article">
        <div id="tasks-list">

          <% @tasks.each do |t| %>
            <% @categorys.each do |c| %>
              <% if t.category_id == c.id%> 
          
                <%#= タスクカード start %>
                <ul class="article card" v-if="isActive === '<%= t.category_id %>'">
                  <div class="card-body">
                    <div class="d-flex justify-content-between ">

                      <%# カードの中身%>   
                      <div class="task-status">
                  
                        <%# チェックボックス %>  
                        <p id="taks-<%= t.id%>">    
                          <% if t.checked_by?(t) %>
                            <%# あり %>
                            <%= render "offcheck", task_id: t %>
                          <% else %>      
                            <%# なし%>
                            <%= render "oncheck", task_id: t %>
                          <% end %>
                        </p>
                    
                        <%# グリッド%>  
                        <i class="fas fa-grip-lines-vertical text-primary grip mr-2 "></i>
                     
                        <%# タスク名 %>
                        <span class="h5 pr-5"><%= t.name %></span>
                    
                      </div>  

                      <div class="d-none d-sm-block ">
                        <div class="btn-group d-flex">
                          <div class="btn-toolbar">
                            <%# 編集ボタン %>
                            <%= link_to edit_task_path(t),class: "btn text-primary btn-sm btn-sm mr-1", :method => :get do %>
                              <i class="fas fa-pen"></i>
                            <% end %>
                            <%# コメント一覧へリンク %>
                            <%= link_to  task_path(t), class: "btn text-primary btn-sm btn-sm mr-1", :method => :get do%>
                              <i class="far fa-comments"></i>
                            <% end %>
                          </div>
                        </div>
                      </div>
                    
                    </div>
                  </div>
                </ul>
                <%#= タスクカード finish %>
              
              <% end %>
            <% end %>
          <% end %> 

        </div>
      </ul>
      <%# タスクカードリスト finish%>

    </div>
   <%# カテゴリー + タスク finish %>

</div> 

<%# Vue.js %>
<%= javascript_pack_tag 'tab_vue' %>  











